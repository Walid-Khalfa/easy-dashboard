import{r,t as e,w as O,y as B,x as D,v as N,z as q,B as b,M as g}from"./index-WOgDrsTr.js";import{d as G,c as p,u as m,s as V,D as X,C as J,R as Q,U as Z,S as ee,b as te}from"./uinqueId-BBtTEzyu.js";import{D as ne,F as se,d as S,a as oe,b as ae,C as le}from"./request-ubeBnyl9.js";import{R as ie,a as F,C as A}from"./EyeOutlined-DAE5y32J.js";import{C as L}from"./CustomerForm-CUN33aIb.js";import"./index-DLafOlG3.js";function M(t){if(t.indexOf("#")===0&&(t=t.slice(1)),t.length===3&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),t.length!==6)throw new Error("Invalid HEX color.");var s=parseInt(t.slice(0,2),16),l=parseInt(t.slice(2,4),16),o=parseInt(t.slice(4,6),16);return s*.299+l*.587+o*.114>186?"#000000":"#FFFFFF"}function re({config:t,DropDownRowMenu:s,AddNewItem:l}){const o=r.useRef(null),[c,d]=r.useState([]),[C,h]=r.useState([]),[a,y]=r.useState({}),f=()=>{o.current.click()},T=n=>{const i={};c.map(u=>{i[u]=n.target.value}),y({...a,...i}),d([])};function E(){return e.jsxs("div",{style:{position:"relative",display:"inline-block"},children:[e.jsx(b,{onClick:f,children:"Make new Color"}),e.jsx("input",{type:"color",ref:o,onChange:T,style:{opacity:0,position:"absolute",left:0,top:"10px",width:"100%"}})]})}let{entity:j,dataTableColumns:w,dataTableTitle:v}=t;w=[...w.map(n=>({...n,render:(i,u)=>({props:{style:{background:a[u._id]?a[u._id]:"",color:a[u._id]?M(a[u._id]):""}},children:i})})),{title:"",render:n=>({props:{style:{background:a[n._id]?a[n._id]:"",color:a[n._id]?M(a[n._id]):""}},children:e.jsx(ne,{overlay:s({row:n}),trigger:["click"],children:e.jsx(O,{style:{cursor:"pointer",fontSize:"24px"}})})})}];const{result:$,isLoading:P}=B(G),{pagination:Y,items:R}=$,I=D(),_=r.useCallback(n=>{I(p.list(j,n.current))},[I,j]);r.useEffect(()=>{I(p.list(j))},[I,j]),r.useEffect(()=>{const n=R.map(i=>i._id);h(n)},[R]);const[U,H]=r.useState(),[z,k]=r.useState(!1),W=(n,i)=>({onClick:()=>{},onMouseDown:()=>{H(i),d([n._id]),k(!0)},onMouseEnter:()=>{if(z){const u=C.slice(U,i+1);d(u)}},onMouseUp:()=>{k(!1)}}),K={selectedRowKeys:c,onChange:(n,i)=>{d(n),console.log("selectedRowKeys changed: ",c)},hideSelectAll:!0,columnWidth:0};return e.jsxs(N.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.4},children:[e.jsxs("div",{style:x.pageHeader,children:[e.jsxs("div",{style:x.headerLeft,children:[e.jsx(N.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.history.back(),style:x.backButton,children:e.jsx(q,{})}),e.jsx("h1",{style:x.pageTitle,children:v})]}),e.jsxs("div",{style:x.headerRight,children:[e.jsx(E,{config:t},`${m()}`),e.jsx(b,{onClick:_,children:"Refresh"},`${m()}`),e.jsx(l,{config:t},`${m()}`)]})]}),e.jsx(se,{columns:w,rowKey:n=>n._id,rowSelection:K,onRow:W,ellipsis:!0,size:"small",dataSource:R,pagination:Y,loading:P,onChange:_})]})}const x={pageHeader:{padding:"20px 0px",background:"transparent",display:"flex",justifyContent:"space-between",alignItems:"center"},headerLeft:{display:"flex",alignItems:"center",gap:16},headerRight:{display:"flex",alignItems:"center",gap:12},backButton:{width:40,height:40,borderRadius:10,background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",color:"#A3A3A3",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},pageTitle:{fontFamily:"'Playfair Display', Georgia, serif",fontSize:24,fontWeight:600,color:"#FAFAFA",margin:0}};function ce({config:t}){const{crudContextAction:s}=S(),{collapsedBox:l,panel:o}=s,{ADD_NEW_ENTITY:c}=t,d=()=>{o.open(),l.close()};return e.jsx(b,{onClick:d,type:"primary",children:c})}function de({row:t}){const s=D(),{crudContextAction:l}=S(),{panel:o,collapsedBox:c,modal:d,readBox:C,editBox:h}=l,a=B(V(t._id)),y=()=>{s(p.currentItem(a)),o.open(),c.open(),C.open()};function f(){s(p.currentAction("update",a)),h.open(),o.open(),c.open()}function T(){s(p.currentAction("delete",a)),d.open()}return e.jsxs(g,{style:{width:130},children:[e.jsx(g.Item,{icon:e.jsx(ie,{}),onClick:y,children:"Show"},`${m()}`),e.jsx(g.Item,{icon:e.jsx(oe,{}),onClick:f,children:"Edit"},`${m()}`),e.jsx(g.Item,{icon:e.jsx(ae,{}),onClick:T,children:"Delete"},`${m()}`)]})}function ue({config:t}){return e.jsx(re,{config:t,DropDownRowMenu:de,AddNewItem:ce})}function pe({config:t,formElements:s}){return e.jsxs(e.Fragment,{children:[e.jsx(Q,{config:t}),e.jsx(Z,{config:t,formElements:s})]})}function me({config:t}){const{crudContextAction:s}=S(),{collapsedBox:l}=s,o=()=>{l.close()};return e.jsxs("div",{className:"box",children:[e.jsx(F,{gutter:12,children:e.jsx(A,{className:"gutter-row",span:21,children:e.jsx("h1",{style:{fontSize:20,marginBottom:20},children:t.panelTitle})})}),e.jsxs(F,{gutter:8,children:[e.jsx(A,{className:"gutter-row",span:21,children:e.jsx(ee,{config:t})}),e.jsx(A,{className:"gutter-row",span:3,children:e.jsx(b,{onClick:o,block:!0,icon:e.jsx(te,{})})})]})]})}function xe({config:t,createForm:s,updateForm:l}){const o=D();return r.useLayoutEffect(()=>{o(p.resetState())},[]),e.jsxs(le,{config:t,fixHeaderPanel:e.jsx(me,{config:t}),sidePanelBottomContent:e.jsx(J,{config:t,formElements:s}),sidePanelTopContent:e.jsx(pe,{config:t,formElements:l}),children:[e.jsx(ue,{config:t}),e.jsx(X,{config:t})]})}function be(){const E={entity:"client",panelTitle:"SelectCustomer Panel",dataTableTitle:"Customers Lists",ENTITY_NAME:"customer",CREATE_ENTITY:"Create customer",ADD_NEW_ENTITY:"Add new customer",UPDATE_ENTITY:"Update customer",DATATABLE_TITLE:"customers List",readColumns:[{title:"Company",dataIndex:"company"},{title:"Manager Surname",dataIndex:"surname"},{title:"Manager Name",dataIndex:"name"},{title:"Email",dataIndex:"email"},{title:"Phone",dataIndex:"phone"}],dataTableColumns:[{title:"Company",dataIndex:"company"},{title:"Manager Surname",dataIndex:"surname"},{title:"Manager Name",dataIndex:"name"},{title:"Email",dataIndex:"email"}],searchConfig:{displayLabels:["company","surname","name"],searchFields:"company,surname,name",outputValue:"_id"},entityDisplayLabels:["company"]};return e.jsx(xe,{createForm:e.jsx(L,{}),updateForm:e.jsx(L,{isUpdateForm:!0}),config:E})}export{be as default};
