import{t as e,B as A,x as y,y as F,M as x,r as h}from"./index-WOgDrsTr.js";import{s as P,u as T,c as u,a as S,L as _,D as L,C as R,R as B,U,S as g,b as k}from"./uinqueId-BBtTEzyu.js";import{d as C,a as Y,b as $,r as M,C as q}from"./request-ubeBnyl9.js";import{D as v}from"./index-B60p3ypR.js";import{R as W,a as N,C as E}from"./EyeOutlined-DAE5y32J.js";import{R as b}from"./LockOutlined-DFELFi0e.js";import{F as i,I as j}from"./index-DLafOlG3.js";function H({config:t}){const{crudContextAction:s}=C(),{collapsedBox:a,panel:n}=s,{ADD_NEW_ENTITY:o}=t,r=()=>{n.open(),a.close()};return e.jsx(A,{onClick:r,type:"primary",children:o})}function O({row:t}){const s=y(),{crudContextAction:a}=C(),{panel:n,collapsedBox:o,modal:r,advancedBox:m,readBox:c,editBox:l}=a,d=F(P(t._id)),f=()=>{s(u.currentItem(d)),n.open(),o.open(),c.open()};function I(){s(u.currentAction("update",d)),l.open(),n.open(),o.open()}function p(){s(u.currentAction("update",d)),m.open(),n.open(),o.open()}function w(){s(u.currentAction("delete",d)),r.open()}return e.jsxs(x,{style:{minWidth:130},children:[e.jsx(x.Item,{icon:e.jsx(W,{}),onClick:f,children:"Show"},`${T()}`),e.jsx(x.Item,{icon:e.jsx(Y,{}),onClick:I,children:"Edit"},`${T()}`),e.jsx(x.Item,{icon:e.jsx(b,{}),onClick:p,children:"Update Password"},`${T()}`),e.jsx(x.Item,{icon:e.jsx($,{}),onClick:w,children:"Delete"},`${T()}`)]})}function z({config:t}){return e.jsx(v,{config:t,DropDownRowMenu:O,AddNewItem:H})}function V(){const[t,s]=h.useState(null),[a,n]=h.useState(!1),[o,r]=h.useState(!1);return{onFetch:async c=>{r(!0);const l=await c();l.success===!0&&(n(!0),s(l.result)),r(!1)},result:t,isSuccess:a,isLoading:o}}function G({config:t}){const s=y(),{current:a}=F(S),{state:n}=C(),[o]=i.useForm(),{onFetch:r,isLoading:m,isSuccess:c}=V(),l=I=>{const p=a._id;r(()=>M.patch("admin/password-update/"+p,I))};h.useEffect(()=>{c&&(o.resetFields(),s(u.resetAction("update")))},[c]);const{isAdvancedBoxOpen:d}=n,f=d?{display:"block",opacity:1}:{display:"none",opacity:0};return e.jsx("div",{style:f,children:e.jsxs(_,{isLoading:m,children:[e.jsx("h3",{children:"Update Password"}),e.jsx("div",{className:"space"}),e.jsxs(i,{form:o,layout:"vertical",onFinish:l,children:[e.jsx(i.Item,{label:"New Password",name:"password",rules:[{required:!0,message:"Please input your Password!",len:8}],children:e.jsx(j,{prefix:e.jsx(b,{className:"site-form-item-icon"}),type:"password",autoComplete:"off"})}),e.jsx(i.Item,{children:e.jsx(A,{type:"primary",htmlType:"submit",children:"Update"})})]})]})})}function J({config:t,formElements:s}){return e.jsxs(e.Fragment,{children:[e.jsx(B,{config:t}),e.jsx(U,{config:t,formElements:s}),e.jsx(G,{config:t})]})}function K({config:t}){const{crudContextAction:s}=C(),{collapsedBox:a}=s,n=()=>{a.close()};return e.jsxs("div",{className:"box",children:[e.jsx(N,{gutter:12,children:e.jsx(E,{className:"gutter-row",span:21,children:e.jsx("h1",{style:{fontSize:20,marginBottom:20},children:t.panelTitle})})}),e.jsxs(N,{gutter:8,children:[e.jsx(E,{className:"gutter-row",span:21,children:e.jsx(g,{config:t})}),e.jsx(E,{className:"gutter-row",span:3,children:e.jsx(A,{onClick:n,block:!0,icon:e.jsx(k,{})})})]})]})}function Q({config:t,createForm:s,updateForm:a}){const n=y();return h.useLayoutEffect(()=>{n(u.resetState())},[]),e.jsxs(q,{config:t,fixHeaderPanel:e.jsx(K,{config:t}),sidePanelBottomContent:e.jsx(R,{config:t,formElements:s}),sidePanelTopContent:e.jsx(J,{config:t,formElements:a}),children:[e.jsx(z,{config:t}),e.jsx(L,{config:t})]})}function D({isUpdateForm:t=!1}){return e.jsxs(e.Fragment,{children:[e.jsx(i.Item,{label:"E-mail",name:"email",rules:[{required:!0,message:"Please input your Email!"}],children:e.jsx(j,{autoComplete:"off"})}),!t&&e.jsx(i.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your Password!"}],children:e.jsx(j,{type:"password",autoComplete:"off"})}),e.jsx(i.Item,{label:"name",name:"name",rules:[{required:!0}],children:e.jsx(j,{autoComplete:"off"})}),e.jsx(i.Item,{label:"surname",name:"surname",rules:[{required:!0}],children:e.jsx(j,{autoComplete:"off"})})]})}function oe(){const p={entity:"admin",panelTitle:"Admin Panel",dataTableTitle:"Admin Lists",ENTITY_NAME:"admin",CREATE_ENTITY:"Create admin",ADD_NEW_ENTITY:"Add new admin",UPDATE_ENTITY:"Update admin",DATATABLE_TITLE:"Admins List",readColumns:[{title:"Name",dataIndex:"name"},{title:"Surname",dataIndex:"surname"},{title:"Email",dataIndex:"email"}],dataTableColumns:[{title:"Name",dataIndex:"name"},{title:"Surname",dataIndex:"surname"},{title:"Email",dataIndex:"email"}],searchConfig:{displayLabels:["name","surname"],searchFields:"email,name,surname",outputValue:"_id"},entityDisplayLabels:["email"]};return e.jsx(Q,{createForm:e.jsx(D,{}),updateForm:e.jsx(D,{isUpdateForm:!0}),config:p})}export{oe as default};
